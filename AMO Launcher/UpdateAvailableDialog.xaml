<Window x:Class="AMO_Launcher.Views.UpdateAvailableDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Update Available" Height="450" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{StaticResource SecondaryBrush}"
        BorderBrush="#444444"
        BorderThickness="1"
        WindowStyle="None">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Grid Grid.Row="0" Background="{StaticResource PrimaryBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Text="Update Available" VerticalAlignment="Center" Margin="10,0,0,0" 
                       Foreground="{StaticResource TextBrush}" FontWeight="SemiBold" />

            <Button x:Name="CloseButton" Grid.Column="1" VerticalAlignment="Center"
                    Click="CloseButton_Click" Content="&#xE8BB;">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="Width" Value="32"/>
                        <Setter Property="Height" Value="32"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#E81123"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>

        <!-- Content -->
        <Grid Grid.Row="1" Margin="20,15,20,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" TextWrapping="Wrap" Margin="0,0,0,15" Foreground="{StaticResource TextBrush}">
                <Run Text="A new version of AMO Launcher is available! Would you like to update now?" FontWeight="SemiBold" FontSize="14" />
            </TextBlock>

            <Grid Grid.Row="1" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Current Version:" VerticalAlignment="Center" 
                           Foreground="{StaticResource TextBrush}" FontWeight="SemiBold" Margin="0,0,10,0" />
                <TextBlock x:Name="CurrentVersionTextBlock" Grid.Column="1" VerticalAlignment="Center" 
                           Foreground="{StaticResource TextBrush}" Text="1.0.0" />

                <TextBlock Grid.Column="2" Text="New Version:" VerticalAlignment="Center" 
                           Foreground="{StaticResource TextBrush}" FontWeight="SemiBold" Margin="20,0,10,0" />
                <TextBlock x:Name="NewVersionTextBlock" Grid.Column="3" VerticalAlignment="Center" 
                           Foreground="#ADFF2F" Text="1.1.0" FontWeight="SemiBold" />
            </Grid>

            <TextBlock Grid.Row="2" Text="Release Notes:" VerticalAlignment="Bottom" 
                       Foreground="{StaticResource TextBrush}" FontWeight="SemiBold" Margin="0,0,0,5" />

            <Border Grid.Row="3" BorderThickness="1" BorderBrush="#444444" 
                    Background="{StaticResource PrimaryBrush}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <TextBox x:Name="ReleaseNotesTextBox" TextWrapping="Wrap" IsReadOnly="True" BorderThickness="0"
                             Background="Transparent" Foreground="{StaticResource TextBrush}" Padding="10"
                             VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                             Text="Loading release notes..." />
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Buttons -->
        <Grid Grid.Row="2" Margin="20,10,20,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button x:Name="RemindLaterButton" Grid.Column="1" Content="Remind Me Later" 
                    Style="{StaticResource ActionButton}" Padding="15,8" Click="RemindLaterButton_Click" Height="40" />

            <Button x:Name="InstallNowButton" Grid.Column="3" Content="Install Now" 
                    Style="{StaticResource PrimaryButton}" Padding="15,8" Click="InstallNowButton_Click" Height="40" />
        </Grid>
    </Grid>
</Window>